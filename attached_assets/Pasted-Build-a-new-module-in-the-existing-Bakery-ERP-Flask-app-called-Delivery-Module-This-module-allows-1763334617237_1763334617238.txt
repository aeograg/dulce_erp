Build a new module in the existing Bakery ERP Flask app called "Delivery Module". This module allows Admin or Manager users to enter and record delivery amounts for specific stores on a given date. The form should include: date (default to today), store (dropdown from Store model), and a dynamic list of all products (from Product model) with input fields for quantity sent (integer, default 0). On submit, save to a new Delivery model (id, date, store_id, product_id, quantity_sent). Use this to update the corresponding StockEntry.delivered for that date/store/product (create StockEntry if not exists). The module should also have a view page to list past deliveries (table with date, store, product, quantity_sent), filterable by date/store. After saving, calculate and display total sent quantities per delivery (e.g., sum across products).
Next, create a "Stock Control Module" with a route/page accessible to Admin/Manager. This displays a table of stock entry data from StockEntry model, including columns: date, store_name, product_name, delivered (from entry), current_stock (staff input), waste (staff input), sales_quantity (from Square or manual), expected_remaining (calculated as: delivered - sales_quantity - waste; note: if including previous remaining, adjust to previous_expected + delivered - sales - waste, fetching prev from prior date's entry), reported_remaining (calculated as: current_stock - sales_quantity - waste). Add filters: dropdown for store, date range picker. Use Bootstrap for the table and filters. On load or filter, query DB and recalculate fields if needed.
Finally, add a "Remaining Stock Dashboard" page for Admin/Manager: A simple dashboard view showing current remaining stock levels per store/product. Use a table or grid (Bootstrap cards/rows) with columns: store_name, product_name, reported_remaining (latest from StockEntry), expected_remaining (latest calc), low_stock_alert (if below min_stock_level). Auto-refresh from latest entries; no filters needed, but group by store.
Keep everything simple, mobile-friendly with Bootstrap. Integrate with existing auth/roles. Use comments in code. Test each module. If unclear (e.g., exact reported_remaining calc, or if prev remaining needed in expected), ask for clarification. After building, provide updated code and run guide.